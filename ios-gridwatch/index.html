<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./imgs/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="glide.core.min.css">
    <link rel="stylesheet" href="glide.theme.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chartist@1.3.1/dist/index.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="glide.min.js"></script>
    <script src="./src/app.js" defer type="module"></script>
    <title>IOS Gridwatch</title>
</head>
<body>
    <div class="flex">
        <h1>Isles of Scilly Community Venture Gridwatch</h1>
        <div id="totals" class="card">
            <img src="./imgs/favicon.svg" alt="sunshine">
            <ul class="totals">
                <li>
                    <label for="current"><h2>Live Generation</h3></label>
                    <span id="current" class="highlight-output"></span>
                </li>
                <li>
                    <label for="daily"><h3>Today</h3></label>
                    <div class="arrow"><div class="arrow-body"></div><div class="arrow-head"></div></div>
                    <span id="daily" class="output"></span>
                </li>
                <li>
                    <label for="week"><h3>Last 7 Days</h3></label>
                    <div class="arrow"><div class="arrow-body"></div><div class="arrow-head"></div></div>
                    <span id="week" class="output"></span>
                </li>
                <li>
                    <label for="year"><h3>Last 365 Days</h3></label>
                    <div class="arrow"><div class="arrow-body"></div><div class="arrow-head"></div></div>
                    <span id="year" class="output"></span>
                </li>
                <li>
                    <label for="total"><h2>Total Solar</h3></label>
                    <span id="total" class="highlight-output"></span>
                </li>
            </ul>
        </div>
        <div id="rank" class="card">
            <table>
                <thead>
                    <th>Rank</th>
                    <th>Site</th>
                    <th><label for="generationSort">Generation</label><input type="radio" id="generationSort" name="sort" value="generation" checked="checked"></th>
                    <th><label for="meterSort">Meter</label><input type="radio" id="meterSort" name="sort" value="meter"></th>
                    <th><label for="maxSort">% of max</label><input type="radio" id="maxSort" name="sort" value="max"></th>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="glide">
            <div class="glide__track" data-glide-el="track">
                <ul class="glide__slides" id="sites">

                </ul>
            </div>
            <div data-glide-el="controls">
                <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&lt;</button>
                <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&gt;</button>
            </div>
            <div class="glide__bullets" data-glide-el="controls[nav]">

            </div>
        </div>
    </div>
    <dialog id="siteOverview">
        <object><img></object>
        <div class="space-between">
            <button id="scroll-left">&lt;</button>
            <h3 id="siteName"></h3>
            <button id="scroll-right">&gt;</button>
        </div>
        <p>The meter for this site currently reads <span id="meterReading"></span>.</p>
        <p>This site is currently generating <span id="currentProduction"></span>.</p>
        <div class="tab-section">
            <ul class="tabs">
                <li><label class="periodSelector" for="periodDay">Day</label><input id="periodDay" type="radio" name="period" value="1" checked="checked"></li>
                <li><label class="periodSelector" for="periodWeek">Week</label><input id="periodWeek" type="radio" name="period" value="7"></li>
                <li><label class="periodSelector" for="periodMonth">Month</label><input id="periodMonth" type="radio" name="period" value="31"></li>
                <li><label class="periodSelector" for="periodYear">Year</label><input id="periodYear" type="radio" name="period" value="365"></li>
            </ul>
            <div class="tab-area">
                <p>Total energy generated during this period:<span id="generationInPeriod"></span>. The best output was <span id="bestProduction"></span>.</p>
                <div id="siteChart"></div>
            </div>
        </div>
        <button onclick="document.getElementById('siteOverview').close()">X</button>
    </dialog>
    <div class="column">
        <h2 class="graph-title">Average Demand For Electricity On Scilly Throughout The Day</h2>
        <div id="demandGraph"></div>
        <div id="meaning">
            <label for="scale">Scale solar generation on graph:</label><input type="range" min="1" max="50" step="1" id="scale" value="1"><span id="scale_value"></span>
            <p>The demand on an average day at <span id="time"></span> is <span id="averageDemand"></span>s, current solar generation is meeting <span id="percentOfDemand"></span>% of this.</p>
            <p>Average demand is calculated using <a href="https://connecteddata.nationalgrid.co.uk/dataset/71daeab2-cde5-463f-a066-71dcb5636ddb/resource/e44fcbeb-cc50-4789-8134-3404c414a965/">this data set</a> (National Grid, Isles of Scilly 11kV transformer flows March 2019-April 2021). Unfortunately this is the only data I have found that is available for a significant period and only 1 year of this data is for a typical year (2020 and 2021 are not considered typical due to COVID-19 pandemic). The lowest demand during this period is approximately 50% of the average. Peak demand is around 7MW during November and December 2019 and January and February 2021, during the early evening, these were likely the coldest periods the data covers.</p>
        </div>
    </div>
</body>
</html>